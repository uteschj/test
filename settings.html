<!DOCTYPE html>
<html>
  <head>
    <title>Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
    <script type="text/javascript" charset="utf-8" src="DatePicker.js"></script>
    <script type="text/javascript" charset="utf-8" src="plugins/org.apache.cordova.file/www/File.js"></script>
<script type="text/javascript" charset="utf-8" src="plugins/org.apache.cordova.file-transfer/www/FileTransfer.js"></script>
 <!--<link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.4.5.min.css" type="text/css" charset="utf-8" />-->
 <link rel="stylesheet" href="css/jquery.mobile.flatui.css" type="text/css" charset="utf-8" />
  <!--<link rel="stylesheet" href="themes/my-custom-theme.css" />-->
  <link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
 <!--<script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>-->
 <!--<script src="js/jquery.js"></script>
 <script src="jquery.mobile/jquery.mobile-1.4.5.min.js"></script>-->
 <!--<script src="js/jquery.mobile-1.4.0-rc.1.js"></script>-->
 
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile.structure-1.4.5.min.css" /> 
  <script type="text/javascript" charset="utf-8" src="js/jquery-1.11.1.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/jquery.mobile-1.4.5.min.js"></script>
 <script src="/js/jquery.lazyload.min.js" type="text/javascript"></script>

<script type="text/javascript" charset="utf-8" src="js/sha512.js"></script>
 <script type="text/javascript" charset="utf-8" src="js/main.js"></script>
 <script type="text/javascript" charset="utf-8" src="js/jqm-datebox.mode.flipbox.min.js"></script>
 <script type="text/javascript" charset="utf-8" src="js/jqm-datebox.mode.datebox.min.js"></script>
 <script type="text/javascript" charset="utf-8" src="js/jqm-datebox.mode.calbox.min.js"></script>
 <script type="text/javascript" charset="utf-8" src="js/jqm-datebox.core.min.js"></script>
 <!--<script type="text/javascript" charset="utf-8" src="js/main.js"></script>-->
    <script type="text/javascript" charset="utf-8">
    var pictureSource;   // picture source
    
    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready",onDeviceReady,false);
    // device APIs are available
    //
    function onDeviceReady() {
        navigator.geolocation.getCurrentPosition(sendCord);
	getStatusSearchHistory();
	var fromLoggin = getUrlParameter('loggedin');
	if (fromLoggin === 'yes') {
	pushRegistration();
	}
	
	//alert(document.referrer);
    }
    
    function theendTimepicker()
    {
    	var options = {
  date: new Date(),
  mode: 'time'
};

datePicker.show(options, function(date){
  //alert("date result " + date);
  
var hours = date.getHours(); //returns 0-23
var minutes = date.getMinutes(); //returns 0-59
var seconds = date.getSeconds(); //returns 0-59
hours = hours + "";
minutes = minutes + "";
seconds = seconds + "";
var hoursString = "";
var minutesString = "";
var secondsString = "";
if(hours.length <2) {
  hoursString = 0+hours+""; //+""casts minutes to a string.
}
else {
  hoursString = hours;
}
if(minutes.length <2) {
  minutesString = 0+minutes+""; //+""casts minutes to a string.
}
else {
  minutesString = minutes;
}
if(seconds.length <2) {
  secondsString = 0+seconds+""; //+""casts minutes to a string.
}
else {
  secondsString = seconds;
}
var timestring = hoursString + ":" + minutesString + ":" + secondsString;
   $('#EndnotifTime').val(timestring); 
});
    	
    }
    
function thestartTimepicker()
    {
    	var options = {
  date: new Date(),
  mode: 'time'
};

datePicker.show(options, function(date){
  //alert("date result " + date); 
  var hours = date.getHours(); //returns 0-23
var minutes = date.getMinutes(); //returns 0-59
var seconds = date.getSeconds(); //returns 0-59
hours = hours + "";
minutes = minutes + "";
seconds = seconds + "";
var hoursString = "";
var minutesString = "";
var secondsString = "";
if(hours.length <2) {
  hoursString = 0+hours+""; //+""casts minutes to a string.
}
else {
  hoursString = hours;
}
if(minutes.length <2) {
  minutesString = 0+minutes+""; //+""casts minutes to a string.
}
else {
  minutesString = minutes;
}
if(seconds.length <2) {
  secondsString = 0+seconds+""; //+""casts minutes to a string.
}
else {
  secondsString = seconds;
}
var timestring = hoursString + ":" + minutesString + ":" + secondsString;

  $('#StartnotifTime').val(timestring); 
});
    	
    }
    
    
    function savePushSettings() {
//alert('startingfunction');
    //var pass = hex_sha512($("#password", form).val());
    var aenabled = $("#checkboxPushEnabled").is(':checked');
    
    var amonday = $("#checkboxMonday").is(':checked');
    var atuesday = $("#checkboxtTuesday").is(':checked');
    var awednesday = $("#checkboxWednesday").is(':checked');
    var athursday = $("#checkboxThursday").is(':checked');
    var afriday = $("#checkboxFriday").is(':checked');
    var asaturday = $("#checkboxSaturday").is(':checked');
    var asunday = $("#checkboxSunday").is(':checked');
    
    var astarttime = $("#StartnotifTime").val();
    var aendtime = $("#EndnotifTime").val();
   //alert('stgfunction');
   window.localStorage.setItem("chatPushEnabled", aenabled);
   
   window.localStorage.setItem("chatMonday", amonday);
   window.localStorage.setItem("chatTuesday", atuesday);
   window.localStorage.setItem("chatWednesday", awednesday);
   window.localStorage.setItem("chatThursday", athursday);
   window.localStorage.setItem("chatFriday", afriday);
   window.localStorage.setItem("chatSaturday", asaturday);
   window.localStorage.setItem("chatSunday", asunday);
   
   window.localStorage.setItem("chatStartTime", astarttime);
   window.localStorage.setItem("chatEndTime", aendtime);
   var session = window.localStorage.getItem("webSessionID");
   var push = window.localStorage.getItem("pushID");

      var formData = {sessionID:session,pushID:push,pushEnabled:aenabled,bmonday:amonday,btuesday:atuesday,bwednesday:awednesday,bthursday:athursday,bfriday:afriday,bsaturday:asaturday,bsunday:asunday,bstarttime:astarttime,bendtime:aendtime}; //Array 
 
$.ajax({
    url : "https://totalsupply1.com/log_in/process_pushSettings.php",
    type: "POST",
    data : formData,
    success: function(data, textStatus, jqXHR)
    {
        alert(data);
    },
    error: function (jqXHR, textStatus, errorThrown)
    {
 alert('errpr');

    }
});
    }
    </script>
  </head>
  <body onload="init()">

<div data-role="page">

    <div data-role="panel" id="panel" data-position="right" data-theme="a" data-display="push"><ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset ui-corner-all ui-shadow">
            <!--<li data-role="list-divider" data-theme="a" data-swatch="a" data-form="ui-bar-a" role="heading" class="ui-li-divider ui-bar-a ui-first-child">List Header</li>
            <li data-form="ui-body-a" data-swatch="a" data-theme="a" class="ui-li-static ui-body-a">Read-only list item</li>-->
            <li class="ui-last-child"><a class="ui-btn-a ui-btn ui-btn-icon-right ui-icon-carat-r" data-form="ui-btn-up-a" data-swatch="a" data-theme="a" href="#">App Settings</a></li>
	    <li class="ui-last-child"><a class="ui-btn-a ui-btn ui-btn-icon-right ui-icon-carat-r" data-form="ui-btn-up-a" data-swatch="a" data-theme="a" href="#">Shopping Cart</a></li>
			
		</ul></div>

    <div data-role="header">
      <a data-iconpos="notext" data-role="button" data-icon="home" title="Home" ontouchstart="window.location.replace('home.html');">Home</a>
      <h1>Home</h1>
      <a data-iconpos="notext" href="#panel" data-role="button" data-icon="grid"></a>
    </div>

    <div data-role="content">    
<div class="app-status-ul">
	
</div>
        <div class="ui-checkbox"><label for="checkboxPushEnabled" data-form="ui-btn-up-a" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-checkbox-on ui-last-child">Push Enabled</label><input data-theme="a" type="checkbox" name="checkboxPushEnabled" id="checkboxPushEnabled" checked="checked"></div>
        <br>
      <div class="ui-checkbox"><label for="checkboxMonday" data-form="ui-btn-up-a" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-checkbox-on ui-last-child">Monday</label><input data-theme="a" type="checkbox" name="checkboxMonday" id="checkboxMonday" checked="checked"></div>
      <div class="ui-checkbox"><label for="checkboxTuesday" data-form="ui-btn-up-a" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-checkbox-on ui-last-child">Tuesday</label><input data-theme="a" type="checkbox" name="checkboxTuesday" id="checkboxTuesday" checked="checked"></div>
      <div class="ui-checkbox"><label for="checkboxWednesday" data-form="ui-btn-up-a" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-checkbox-on ui-last-child">Wednesday</label><input data-theme="a" type="checkbox" name="checkboxWednesday" id="checkboxWednesday" checked="checked"></div>
      <div class="ui-checkbox"><label for="checkboxThursday" data-form="ui-btn-up-a" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-checkbox-on ui-last-child">Thursday</label><input data-theme="a" type="checkbox" name="checkboxThursday" id="checkboxThursday" checked="checked"></div>
      <div class="ui-checkbox"><label for="checkboxFriday" data-form="ui-btn-up-a" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-checkbox-on ui-last-child">Friday</label><input data-theme="a" type="checkbox" name="checkboxFriday" id="checkboxFriday" checked="checked"></div>
      <div class="ui-checkbox"><label for="checkboxSaturday" data-form="ui-btn-up-a" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-checkbox-on ui-last-child">Saturday</label><input data-theme="a" type="checkbox" name="checkboxSaturday" id="checkboxSaturday" checked="checked"></div>
      <div class="ui-checkbox"><label for="checkboxSunday" data-form="ui-btn-up-a" class="ui-btn ui-corner-all ui-btn-a ui-btn-icon-left ui-checkbox-on ui-last-child">Sunday</label><input data-theme="a" type="checkbox" name="checkboxSunday" id="checkboxSunday" checked="checked"></div>
      
      <div class="ui-field-contain">
        <label for="StartnotifTime">Start Time:</label>
		<input type="text" name="StartnotifTime" id="StartnotifTime" ontouchstart="thestartTimepicker();"  />
        </div>
        
        <div class="ui-field-contain">
        <label for="EndnotifTime">End Time:</label>
		<input type="text" name="EndnotifTime" id="EndnotifTime"  ontouchstart="theendTimepicker();"  />
        </div>
        
        
        <button type="button" ontouchstart="savePushSettings();">Save</button>
        
        </div>
        
    
    
    </div>

    <div data-role="footer">
        <h4>&copy; Utesch Enterprises</h4>
    </div>

</div>


  </body>
</html>
